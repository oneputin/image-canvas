<!doctype html>
<html>
<head>
    <title>image-remote-resize</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

    <link rel="import" href="../../fire-base/fire-query.html">

</head>

<body>

  <h3>Demo <span style="font-family: courier;">resize-image-batch-check</span></h3>

  <dom-module id="resize-batchcheck"> 
    
    <template>

      <h4>2. Query album-entries with placeholder calculated.</h4>

      <fire-query app="wolke7" path="cplocal" item="placeholder" data="{{dbdata}}"></fire-query>

    </template>

   
    <script>
      window.addEventListener('WebComponentsReady', function() {
        Polymer({

          is: 'resize-batchcheck',

          properties: {

            clientitems: {
              type: Object,
              computed: 'createArray(dbdata)'
            }

          },
          
          ready: function() {
          },

          // Processes results of "hasPlaceholder"-Query 
          // Transform "keyed"object into array and integrate 'fbkey'
          createArray: function(data) { 
            if (!data) return;
            // obj -> array with prop 'fbkey' 
            if (!Array.isArray(data)) {
              data =  Object.keys(data).map(function(k){
                var doc = data[k];
                doc.fbkey = k;
                return doc
              });
            }  console.log("batch-length=", data.length); 
            return data; 
          }

          
        });  
      });      
    </script>      
  </dom-module>

  <resize-batchcheck></resize-batchcheck>

</body>
</html>
